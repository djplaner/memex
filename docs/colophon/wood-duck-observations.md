---
title: Wood Duck observations
type: note
tags:
    - colophon
    - computational-components
description: Computational component to gather observations of animals, birds, insects, etc and weave and augment that information on this site.
---

## Purpose

With an interest in [[regeneration]] of the [[wood-duck-meadows]] ecosystem comes the desire to make and track various observations about the flora and fauna that inhabit the area. Beyond simply making and recording the observations the desire is to computationally weave and augment observational information to achieve different purposes.

Initially, this takes the form of various [life lists](https://en.wikipedia.org/wiki/Life_list), including: [[bird-life-list]], [[plant-life-list]], and [[other-fauna-life-list]]. Later developments might include

- similar life list galleries showing just the images; and,
- a variety of methods of organising the life list (e.g. plants into invasive, native, trees, shrubs etc).

## Task list

Current status

- [x] Initial import (`importObservations.py`) of iNaturalist and eBird data into individual observations 
- [x] Initial life lists for birds, plants and other fauna

To do

- [ ] Move life lists to be generated by `importObservations.py` rather than as a macro
- Refinements to individual observation pages
    - [x] remove from title "iNaturalist|eBird observation"
    - [ ] Add details about status of iNaturalist observations (e.g. needs ID, research grade, etc)
    - [ ] Support updating of iNaturalist observation pages (e.g. as status changes)
        - iNaturalist observations can be updated, need to check existing observation markdowns and update as necessary 
            - compare existing frontmatter with new and update as necessary from iNaturalist, don't update if frontmatter new
    - [x] change plant life list title to Plant life list - check other life lists
    - [ ] Update bird life list to add linkdefs - merging eBird and iNaturalist observations.
        - create bird life list in `importObservations.py` 
        - eBird and iNaturalist return the data with the view being done in importObservations.py
        - iNaturalist currently has a view, eBird does not relying on macros
        - 

    - [ ] [[rhodosphaera]] - is a genus, not a species. Need to see if we can get specific - esp. with H&K's deep yellowwood
    - [x] plant observation MD still mentions eBird
    - [ ] remove (or reduce the priority) the indvidual observation pages from pagefind search - see [this](https://pagefind.app/docs/indexing/) - will likely need a new template for the observation type
  - Thinking about the nice to haves
    - [ ] iNaturalist pages that include confirmation counts
    - [x] Turn off life list generator and update documentation 
    - [ ] implement a `lifeListGallery` macro for different observations
        - extract relevant bubbles, extract images, construct gallery page content
    - [ ] Need to look into merging old plants that don't have observations, but have entries in the plants folder
      - adding observation macros to the bottom of each page
    - [ ] Ditto for the link to `individual-plants` and how [[individual-plants]] links with the species
      - individual plants arranged by zones
      - ways to link plant observations to zones
    - [ ] Anyway to solve the issue with species pages not having back links (due to life lists relying on macros to have those links) -- perhaps add a "See also" link on species pages to the relevant life list?
    - [ ] update species pages to include scientific name (in brackets)


- Replace/modify photo existing scripts to create observations with photos
  - [ ] `addBirdPhoto` 
  - [ ] `addPlantPhoto` 
- [ ] Figure out whether to use the `add<Observation>` scripts to create observations for existing photos - or leave as is (probably leave)
- [ ] Update [[plants]] (both index and note bubbles) to use observations (essentially add a macro)


## Questions and tasks

- What purpose(s) do we need to support - somewhat open ended, but need one or two to get going
    - bird life list
        - Update [[life-list-generator]] to not work on the CSV file and photographs. Replace photographs with markdown files that include images? Work with both?
    - plants and individual plants
        - observations are linked to individual plants
        - plant pages will need to link to individual plants of same species
- Converters will probably have to draw on downloaded CSV - no live data feed? 
- Where do the converters fit within the pipeline
    - before mkdocs as with current eBird?
    - implemented into mkdocs pipeline - where?

## Conceptual Design

- Built on [[bubbles-as-objects]] practice

### Data entry and storage

- Individual observations are represented by individual markdown files with front-matter (see [data design](#data-design) below)
- Observations are generally stored in `docs/sense/observations` with sub-folders for different observation types e.g. `bird`, `insect`, `plant`, etc.
- Observation creation has two methods
  - Manual editing
  - Import from external data sources (e.g. eBird and iNaturalist) via "converters" to transform original data into markdown files
  - **TODO** Resolve if/how both manual editing and external data source import can co-exist (e.g. I want to add some annotation to an eBird observation) and/or an iNaturalist observation changes - how to update that?
- Each observation type has its own index (`docs/sense/Observations/bird-observations/bird-observations.md`) in a folder into which Markdown files are created for each observation.
    - **TODO** 
    
### Display

- The individual markdown file for an observation is visible/searchable/shareable
    - **TODO** Where possible include open graph metadata for sharing on social media
    - **TODO** `type` is having to do double duty. Indicating it's an observation, but type is also used for display????? (Maybe not)
- [[computational-components]] esp. macro versions are used to display lists of all observations of a= type or to show the content of all observations of a given type
    - `observationsIndex( <other-metadata> )` - generates an index of all observations matching provided metadata
    - `observations( <other-metadata> ) ` - concatenate all the content from matching observations

After implementation

- [[life-list-generator]] (not a [[computational-components]]) generates life list, life list gallery and individual bird species pages


- Provide a macro that allows grouping together observations of a specific type into another page
    - Species page (for flora or fauna) that lists all observations of that species
    - Region page that lists all observations made in that region
    - Individual plant pages that list all observations made of that plant

## Data design

Each observation has a markdown file with following possible front matter fields that can be used for searching and filtering:

- type: observation

    All observations have this.
- subject: [ <wikiLink-of-subject>, ... ]
    Was originally `aka`. Specifies that this is an observation of a particular subject. e.g. a species of bird/plant, a individual plant, etc. 
- observation-type: <established observation type> 
    e.g. bird, insect, mammal, plant, fungi, etc
- And misc others as required
    - plant-type: [ native, exotic, weed, tree, shrub, groundcover, climber, aquatic, etc ] - only for plant observations
  - region: <wood-duck-meadows-region> (as appropriate)

Enabling macros like

```markdown
\{\{ observations( subject: "ficus-obliqua") \}\}
\{\{ observationsIndex( observation-type: 'plant') \}\}
\{\{ observations(region:'gatton-creek-frontage', observation-type: 'bird') \}\}
```

Real life requirements

- [[bird-life-list]] 

    Display a list of all the bird observations I've made ` \{\{ observationsIndex( observation-type: 'bird') \}\} `

    Perhaps the `observation-type` not only controls which observations are included, but also the display format?

- Display content of all bird observations of Black Swans

    ` \{\{ observations( subject: 'black-swan') \}\} ` 

- Display all list of trees that have been observed

    ` \{\{ observationsIndex( observation-type: 'plant', plant-type: 'tree') \}\} `

- Display list of all observations of ficus-obliqua

    ` \{\{ observationsIndex( subject: 'ficus-obliqua') \}\} `





## eBird importer

### [[life-list-generator]]

Existing practice 

- Retrieves data from eBird CSV export
- Makes some modifications to that data
- Checks to see if there's (a) photo(s) matching an observation in a given folder
    - Photos are added by `addBirdPhoto` script  
- Generates a 
  - life list and life list gallery as markdown files
  - individual bird page if there are photos for that bird species

### New practice

- ebird csv file is stored outside the memex project
- bird observations are stored as individual markdown files in `docs/sense/observations/bird-observations/`
  - Each eBird observation is a separate markdown observation file
    - metadata includes most of the eBird fields
    - content (by default) includes some boiler plate text
    - existing observation files are not updated - meaning user can manually add observations
    - if there are photos these are included in the page (as per existing practice)
- a new `ebirdToObservations.py` script is created to convert the eBird CSV file into individual observation markdown files
- a new `iNaturalistToObservations.py` script is created to convert iNaturalist data into individual observation markdown files
    - use the img URLs included in iNaturalist data
- [[life-list-generator]] is modified to 
    - work more explicitly as a [[computational-components]] - probably as macros
    - retrieving the `type: observation` and `aka: bird` bubbles
    - life list and life list gallery become macros to be embedded in relevant pages





[//begin]: # "Autogenerated link references for markdown compatibility"
[regeneration]: ../sense/landscape-garden/regeneration "Bush regeneration (Wood duck meadows)"
[wood-duck-meadows]: ../sense/landscape-garden/wood-duck-meadows "Wood duck meadows"
[bird-life-list]: ../sense/Observations/bird-life-list "Bird life list"
[plant-life-list]: ../sense/Observations/plant-life-list "Plant life list"
[other-fauna-life-list]: ../sense/Observations/other-fauna-life-list "Other-Fauna life list"
[rhodosphaera]: ../sense/landscape-garden/plants/rhodosphaera "Rhodosphaera (deep yellowwood, yellow cedar)"
[individual-plants]: ../sense/landscape-garden/individual-plants/individual-plants "Individual plants"
[plants]: ../sense/landscape-garden/plants/plants "Plants"
[life-list-generator]: life-list-generator "Life list generator"
[bubbles-as-objects]: bubbles-as-objects "Bubbles as objects"
[computational-components]: computational-components "Computational components"
[//end]: # "Autogenerated link references"