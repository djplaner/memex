---
title: Plant location generator
type: note
tags: colophon, computational-components
---

See also: [[computational-components]]

Early experiments with extracting information (about plants) from photos.

## Purpose

Work on [[wood-duck-meadows]] will include a fair bit of planting. For some of these plants we'll want to track and manage their life cycle. This will include taking photos over time. The number and type of individual plants will be large making manual tracking insufficient. Linking photos to a specific plant and broader information about the individual and type of plant will be key.

Initial aims include:

1. Extract information (including GPS location) of plants from photos;
2. Store that information in markdown/yaml frontmatter associated with individual plants; and,
3. Use that information in a number of other [[computational-components]].

    Examples to include:

    - Macros that help with maintaining information about individual plants, plant species, and zones.
    - Generating map-based representations of [[wood-duck-meadows]] indicating individual plant locations and providing subsequent access to plant information.

## Workflow

### Design 1

1. Photos of plants taken with GPS enabled.
2. In Photos 
    - Add photos to zone-based albums.
    - Add title and captions.
3. Use Python to extract GPS location and other metadata from photos.
4. Store extracted data in required places, possibly including
    - Markdown files for individual plants.
    - ???

| Photo metadata | Memex equiv | 
| --- | --- |
| Title | Descriptive title used in figure |
| Caption | Alt tag for photo |
| Keywords | Name of markdown file (for the individual plant) into which to add/update the yaml front matter | 
| Lat, Long | Part of the yaml |

Markdown files ~/plants/individual/[keyword[0]]

Each individual plant can have multiple photos, each with their own yaml.
```yaml
photo_${title}:
    latitude: 45.123
    longitude: -123.456
    caption: "This is a photo of a plant"
    title: "Plant photo"
    path: "..."
```


## Considerations

### Sharing geolocation data

Currently, the photos shared via memex are stripped of geolocation data. This makes the task here a bit more complicated. Suggesting a need for another private source of photos with geolocation data.

## Development/exploration

### Python photo modules

Various older, specific modules for reading exif image data, but [Pillow](https://pillow.readthedocs.io/en/latest/index.html) appears to be the best supported.

[Tutorial on reading exif using Pillow](https://thepythoncode.com/article/extracting-image-metadata-in-python)

Reading exif and other associated data via PIL is harder and less well documented than I would've expected.

### Map generation

The [folium module](https://python-visualization.github.io/folium/latest/) provide Python access to the [Leaflet.js](https://leafletjs.com/) library. 

### Accessing OS X Photos app

Photos are currently stored in the Photos app. The [osxphotos module](https://github.com/RhetTbull/osxphotos?tab=readme-ov-file) seems to provide an answer.

- `osxphotos.PhotosDB` - connects to Photosdb
  - `photos` - retrieve photos using various queries
    - return a list of `PhotoInfo` objects
        - path
        - latitude, longitude
        - place
        - comments
        - labels
        - exif_info
        - `export()` - save photos to different path, numerous options



[//begin]: # "Autogenerated link references for markdown compatibility"
[computational-components]: computational-components "Computational components"
[wood-duck-meadows]: ../sense/landscape-garden/wood-duck-meadows "Wood duck meadows"
[//end]: # "Autogenerated link references"